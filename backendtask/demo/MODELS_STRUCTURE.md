# Упрощенная структура моделей (4 модели)

## Основные модели:

### 1. **User** - Пользователь
- **Роль**: Обязательное поле с тремя значениями (USER, ADMIN, MODERATOR)
- **Поля**: id, username, email, password, firstName, lastName, phoneNumber, address, role, enabled

### 2. **Product** - Товар
- **Поля**: id, name, description, price, stockQuantity, imageUrl, active

### 3. **Order** - Заказ
- **Поля**: id, status, orderDate, totalAmount, shippingAddress, paymentMethod

### 4. **OrderItem** - Элемент заказа
- **Поля**: id, quantity, price, subtotal

## Типы связей:

### One-to-Many (Один ко многим):
1. **User → Order**: Один пользователь может иметь много заказов
2. **Order → OrderItem**: Один заказ может содержать много элементов

### Many-to-One (Многие к одному):
1. **Order → User**: Много заказов принадлежат одному пользователю
2. **OrderItem → Order**: Много элементов заказа принадлежат одному заказу
3. **OrderItem → Product**: Много элементов заказа ссылаются на один товар

### Many-to-Many (Многие ко многим) - ДВУНАПРАВЛЕННАЯ:
1. **User ↔ Product**: Пользователи могут добавлять товары в избранное, товары могут быть избранными у многих пользователей

## Двунаправленные связи:
1. **User ↔ Order**: User содержит коллекцию заказов, Order ссылается на пользователя
2. **User ↔ Product**: Связь "избранные товары" - двунаправленная Many-to-Many

## Особенности:
- Пользователь имеет **обязательную роль** (USER, ADMIN, MODERATOR)
- Все связи используют ленивую загрузку (LAZY) 
- **Две двунаправленные связи** как требовалось:
  - User ↔ Order (One-to-Many / Many-to-One)
  - User ↔ Product (Many-to-Many)
- Каскадные операции настроены для дочерних сущностей
- Добавлены бизнес-методы для управления связями
- Валидация полей с помощью Bean Validation
- Каждая модель содержит собственное поле `id` с автогенерацией 